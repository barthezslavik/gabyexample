<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <title>Що таке геометрична алгебра?</title>
  <link href="css/bootstrap.min.css" rel="stylesheet" />
  <link href="css/style.css" rel="stylesheet" />
</head>
<body>
  <div class="container mt-3">
    <div class="row">
      <div class="col-md-12">
        <h1>Що таке геометрична алгебра?</h1>
        <p>Демонстрація з покроковим запуском</p>
        <button onclick="stepA()">Step A</button>
        <button onclick="stepB()">Step B</button>
        <button onclick="stepC()">Step C</button>
      </div>
    </div>
  </div>

  <script src="js/ganja.js"></script>
  <script>
    let A, B, C, graphContainer;
    const configA = {
      grid: true, labels: false, h: 0.6, p: -0.15,
      lineWidth: 3, pointRadius: 1, fontSize: 1, scale: 1
    };
    const configC = { ...configA, labels: true };

    function stepA() {
      Algebra(3, 0, 1, () => {
        graphContainer = graphContainer || document.createElement('div');
        if (!graphContainer.parentNode) document.body.appendChild(graphContainer);
        graphContainer.innerHTML = "";
        const emptyGraph = this.graph(() => [], configA);
        graphContainer.appendChild(emptyGraph);
        console.log("Algebra setup complete!");
      });
    }

    function stepB() {
      Algebra(3, 0, 1, () => {
        const pt = (x, y, z) => !(1 + x * 1e1 + y * 1e2 + z * 1e3);
        [A, B, C] = [pt(0, 0.8, 0), pt(-0.8, -0.8, 0), pt(0.8, -0.8, 0)];
        console.log("Points A, B, C created!");

        // Draw points on the graph
        const pointsGraph = this.graph(() => [
          0x224488, A, "A", 
          0x224488, B, "B", 
          0x224488, C, "C"
        ], configC);
        graphContainer.innerHTML = "";
        graphContainer.appendChild(pointsGraph);
        console.log("Points drawn on graph!");
      });
    }

    function stepC() {
      Algebra(3, 0, 1, () => {
        const [lAB, lBC, lCA] = [A & B, B & C, C & A];
        graphContainer.innerHTML = "";
        const newGraph = this.graph(() => [
          0x224488, A, "A", 0x224488, B, "B", 0x224488, C, "C",
          0x268F00, lAB, "A & B",
          0x3E7FFE, lBC, "B & C",
          0xF62605, lCA, "C & A"
        ], configC);
        graphContainer.appendChild(newGraph);
        console.log("Lines and scene rendered!");
      });
    }
  </script>
</body>
</html>
