<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <link href="css/bootstrap.min.css" rel="stylesheet" />
  <link href="css/style.css" rel="stylesheet" />
</head>
<body>
  <div class="container mt-3">
    <div class="row">
      <div class="col-md-12">
        <button onclick="stepA()">Step A</button>
        <button onclick="stepB()">Step B</button>
        <button onclick="stepC()">Step C</button>
      </div>
    </div>
  </div>

  <script src="js/ganja.js"></script>
  <script>
    // Create a global container to attach the canvas:
    let graphContainer = document.createElement('div');
    document.body.appendChild(graphContainer);

    // Our shared config, with draggable enabled:
    const config = {
      grid        : true,
      labels      : true,
      h           : 0.6,
      p           : -0.15,
      lineWidth   : 3,
      pointRadius : 1,
      fontSize    : 1,
      scale       : 1,
      draggable   : true  // <-- important for many versions of ganja.js
    };

    function stepA() {
      Algebra(3, 0, 1, () => {
        // helper for 3D PGA points
        const point = (x,y,z) => !(1e0 + x*1e1 + y*1e2 + z*1e3);

        // define 3 points
        let A = point(0,    0.8, 0);
        let B = point(-0.8, -0.8, 0);
        let C = point(0.8,  -0.8, 0);

        // create the canvas inside the algebra callback
        let g = this.graph(() => {
          let lineAB = A & B;
          let lineBC = B & C;
          let lineCA = C & A;
          return [
            0x224488, A,"A", B,"B", C,"C",
            0x268F00, lineAB, "A & B",
            0x3E7FFE, lineBC, "B & C",
            0xF62605, lineCA, "C & A",
          ];
        }, config);

        // clear & attach
        graphContainer.innerHTML = "";
        graphContainer.appendChild(g);
      });
    }

    function stepB() {
      Algebra(3, 0, 1, () => {
        const point = (x,y,z) => !(1e0 + x*1e1 + y*1e2 + z*1e3);
        let A = point(0,    0.8, 0);
        let B = point(-0.8, -0.8, 0);
        let C = point(0.8,  -0.8, 0);

        let g = this.graph(() => {
          let lineAB = A & B;
          let lineBC = B & C;
          let lineCA = C & A;
          return [
            0x224488, A,"A", B,"B", C,"C",
            0x268F00, lineAB, "A & B",
            0x3E7FFE, lineBC, "B & C",
            0xF62605, lineCA, "C & A",
          ];
        }, config);

        graphContainer.innerHTML = "";
        graphContainer.appendChild(g);
      });
    }

    function stepC() {
      Algebra(3, 0, 1, () => {
        const point = (x,y,z) => !(1e0 + x*1e1 + y*1e2 + z*1e3);
        let A = point(0,    0.8, 0);
        let B = point(-0.8, -0.8, 0);
        let C = point(0.8,  -0.8, 0);

        let g = this.graph(() => {
          let lineAB = A & B;
          let lineBC = B & C;
          let lineCA = C & A;
          return [
            0x224488, A,"A", B,"B", C,"C",
            0x268F00, lineAB, "A & B",
            0x3E7FFE, lineBC, "B & C",
            0xF62605, lineCA, "C & A",
          ];
        }, config);

        graphContainer.innerHTML = "";
        graphContainer.appendChild(g);
      });
    }
  </script>
</body>
</html>
